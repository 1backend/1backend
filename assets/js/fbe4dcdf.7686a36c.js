"use strict";(self.webpackChunksingulatron_api_docs=self.webpackChunksingulatron_api_docs||[]).push([[2637],{25284:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>R,contentTitle:()=>g,default:()=>Y,frontMatter:()=>k,metadata:()=>i,toc:()=>v});const i=JSON.parse('{"id":"1backend-api/refresh-token","title":"Refresh Token","description":"Refreshes an existing token, including inactive ones.","source":"@site/docs/1backend-api/refresh-token.api.mdx","sourceDirName":"1backend-api","slug":"/1backend-api/refresh-token","permalink":"/docs/1backend-api/refresh-token","draft":false,"unlisted":false,"editUrl":null,"tags":[],"version":"current","frontMatter":{"id":"refresh-token","title":"Refresh Token","description":"Refreshes an existing token, including inactive ones.","sidebar_label":"Refresh Token","hide_title":true,"hide_table_of_contents":true,"api":"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","sidebar_class_name":"post api-method","info_path":"docs/1backend-api/1-backend","custom_edit_url":null},"sidebar":"openApiSidebar","previous":{"title":"Get Public Key","permalink":"/docs/1backend-api/get-public-key"},"next":{"title":"Register","permalink":"/docs/1backend-api/register"}}');var s=n(74848),r=n(28453),o=n(53746),a=n.n(o),c=n(56518),d=n.n(c),h=n(99972),p=n.n(h),l=n(25342),u=n.n(l),f=(n(44215),n(82223),n(24861));const k={id:"refresh-token",title:"Refresh Token",description:"Refreshes an existing token, including inactive ones.",sidebar_label:"Refresh Token",hide_title:!0,hide_table_of_contents:!0,api:"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",sidebar_class_name:"post api-method",info_path:"docs/1backend-api/1-backend",custom_edit_url:null},g=void 0,R={},v=[];function b(e){const t={p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.default,{as:"h1",className:"openapi__heading",children:"Refresh Token"}),"\n",(0,s.jsx)(a(),{method:"post",path:"/user-svc/refresh-token",context:"endpoint"}),"\n",(0,s.jsx)(t.p,{children:"Refreshes an existing token, including inactive ones.\nThe old token becomes inactive (if not already inactive), and a new, active token is issued.\nThis allows continued verification of user roles without requiring a new login.\nInactive tokens are refreshable unless explicitly revoked (no mechanism for this yet).\nLeaked tokens should be handled separately, via a revocation flag or deletion."}),"\n",(0,s.jsx)(d(),{parameters:void 0}),"\n",(0,s.jsx)(p(),{title:"Body",body:void 0}),"\n",(0,s.jsx)(u(),{id:void 0,label:void 0,responses:{200:{description:"Refresh Token successful",content:{"application/json":{schema:{properties:{token:{properties:{active:{description:"Active tokens contain the most up-to-date information.\nWhen a user's role changes\u2014due to role assignment, organization\ncreation/assignment, etc.\u2014all existing tokens are marked inactive.\nActive tokens are reused during login, while inactive tokens\nthat have been recently refreshed (being used still) are kept for further refreshing\n(unless `OB_TOKEN_AUTO_REFRESH_OFF` is set to true, old tokens can be refreshed indefinitely.)\n\nActive tokens contain the most up-to-date information.\nWhen a user's role changes\u2014due to role assignment, organization\ncreation/assignment, etc.\u2014all existing tokens are marked inactive.\nActive tokens are reused during login, while inactive tokens\nthat have been recently refreshed (see `lastRefreshedAt` field) and are still in use are retained for further refreshing.\n(Unless `OB_TOKEN_AUTO_REFRESH_OFF` is set to true, in which case old tokens can be refreshed indefinitely.)",type:"boolean"},app:{example:"unnamed,omitempty",type:"string"},createdAt:{type:"string"},deletedAt:{type:"string"},device:{description:"The device the token is associated with.\nThis in combination with LastRefreshedAt can be used to\ndetermine if the token is still in use, and lets us prune unused tokens.",type:"string"},expiresAt:{type:"string"},id:{type:"string"},lastRefreshedAt:{description:"The last time the token was refreshed.\nThis is used to determine if the token is still in use.",type:"string"},token:{description:'Token is a signed JWT used to authenticate the user without querying the User Svc.\nYou can verify it using the public key at `/user-svc/public-key`.\n\nThe token is just a JSON object with fields like:\n- "oui": the user ID (e.g., "usr_dC4K75Cbp6")\n- "olu": the user slug (e.g., "test-user-slug-0")\n- "oro": a list of roles, such as:\n  - "user-svc:user"\n  - "user-svc:org:{org_dC4K7NNDCG}:user"',type:"string"},updatedAt:{type:"string"},userId:{type:"string"}},required:["createdAt","device","expiresAt","id","token","updatedAt","userId"],type:"object"}},required:["token"],type:"object"}}}},401:{description:"Unauthorized",content:{"application/json":{schema:{properties:{error:{type:"string"}},type:"object"}}}},500:{description:"Internal Server Error",content:{"application/json":{schema:{properties:{error:{type:"string"}},type:"object"}}}}}})]})}function Y(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(b,{...e})}):b(e)}}}]);