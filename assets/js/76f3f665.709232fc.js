"use strict";(self.webpackChunksingulatron_api_docs=self.webpackChunksingulatron_api_docs||[]).push([[898],{1230:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>T,contentTitle:()=>b,default:()=>f,frontMatter:()=>g,metadata:()=>i,toc:()=>m});const i=JSON.parse('{"id":"1backend-api/exchange-token","title":"Exchange Token","description":"Exchange an existing token for a new token scoped to a different app (namespace).","source":"@site/docs/1backend-api/exchange-token.api.mdx","sourceDirName":"1backend-api","slug":"/1backend-api/exchange-token","permalink":"/docs/1backend-api/exchange-token","draft":false,"unlisted":false,"editUrl":null,"tags":[],"version":"current","frontMatter":{"id":"exchange-token","title":"Exchange Token","description":"Exchange an existing token for a new token scoped to a different app (namespace).","sidebar_label":"Exchange Token","hide_title":true,"hide_table_of_contents":true,"api":"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","sidebar_class_name":"put api-method","info_path":"docs/1backend-api/1-backend","custom_edit_url":null},"sidebar":"openApiSidebar","previous":{"title":"Has Permission","permalink":"/docs/1backend-api/has-permission"},"next":{"title":"Revoke Tokens","permalink":"/docs/1backend-api/revoke-tokens"}}');var s=n(74848),a=n(28453),o=n(57742),r=n.n(o),c=n(78178),p=n.n(c),d=n(19624),h=n.n(d),l=n(96226),u=n.n(l),k=(n(77675),n(19365),n(51107));const g={id:"exchange-token",title:"Exchange Token",description:"Exchange an existing token for a new token scoped to a different app (namespace).",sidebar_label:"Exchange Token",hide_title:!0,hide_table_of_contents:!0,api:"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",sidebar_class_name:"put api-method",info_path:"docs/1backend-api/1-backend",custom_edit_url:null},b=void 0,T={},m=[];function x(e){const t={p:"p",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k.default,{as:"h1",className:"openapi__heading",children:"Exchange Token"}),"\n",(0,s.jsx)(r(),{method:"put",path:"/user-svc/token/exchange",context:"endpoint"}),"\n",(0,s.jsx)(t.p,{children:"Exchange an existing token for a new token scoped to a different app (namespace).\nThe new token represents the same user but contains roles specific to the target app."}),"\n",(0,s.jsx)(t.p,{children:"The original token remains valid.\nThe minted token is not stored and cannot be refreshed (and will have the same expiration duration as normal tokens), unlike tokens acquired via login."}),"\n",(0,s.jsx)(t.p,{children:"For now, token exchange is designed to be in situ \u2014 the User Svc must be contacted at exchange time.\nThis introduces a stateful dependency on the User Svc, but simplifies things until broader use cases emerge."}),"\n",(0,s.jsx)(k.default,{id:"request",as:"h2",className:"openapi-tabs__heading",children:"Request"}),"\n",(0,s.jsx)(p(),{parameters:void 0}),"\n",(0,s.jsx)(h(),{title:"Body",body:{content:{"application/json":{schema:{properties:{newAppHost:{description:"NewApp is the app of the new token that will be returned by this endpoint.",type:"string"},newAppId:{type:"string"},newDevice:{description:"NewDevice. If not provided, the device of the original token will be used.",type:"string"}},type:"object"}}},description:"ExchangeToken Request",required:!0}}),"\n",(0,s.jsx)(u(),{id:void 0,label:void 0,responses:{200:{description:"ExchangeToken successful",content:{"application/json":{schema:{properties:{token:{allOf:[{properties:{active:{description:"Active tokens contain the most up-to-date information.\nWhen a user's role changes\u2014due to role assignment, organization\ncreation/assignment, etc.\u2014all existing tokens are marked inactive.\nActive tokens are reused during login, while inactive tokens\nthat have been recently refreshed (being used still) are kept for further refreshing\n(unless `OB_TOKEN_AUTO_REFRESH_OFF` is set to true, old tokens can be refreshed indefinitely.)\n\nActive tokens contain the most up-to-date information.\nWhen a user's role changes\u2014due to role assignment, organization\ncreation/assignment, etc.\u2014all existing tokens are marked inactive.\nActive tokens are reused during login, while inactive tokens\nthat have been recently refreshed (see `lastRefreshedAt` field) and are still in use are retained for further refreshing.\n(Unless `OB_TOKEN_AUTO_REFRESH_OFF` is set to true, in which case old tokens can be refreshed indefinitely.)",type:"boolean"},app:{properties:{host:{type:"string"},id:{type:"string"}},required:["host","id"],type:"object"},appId:{type:"string"},createdAt:{type:"string"},deletedAt:{type:"string"},device:{description:"The device the token is associated with.\nThis in combination with LastRefreshedAt can be used to\ndetermine if the token is still in use, and lets us prune unused tokens.",type:"string"},expiresAt:{type:"string"},id:{type:"string"},internalId:{type:"string"},lastRefreshedAt:{description:"The last time the token was refreshed.\nThis is used to determine if the token is still in use.",type:"string"},token:{description:'Token is a signed JWT used to authenticate the user without querying the User Svc.\nYou can verify it using the public key at `/user-svc/public-key`.\n\nThe token is just a JSON object with fields like:\n- "oui": the user ID (e.g., "usr_dC4K75Cbp6")\n- "olu": the user slug (e.g., "test-user-slug-0")\n- "oro": a list of roles, such as:\n  - "user-svc:user"\n  - "user-svc:org:{org_dC4K7NNDCG}:user"',type:"string"},updatedAt:{type:"string"},userId:{type:"string"}},required:["appId","createdAt","device","expiresAt","id","token","updatedAt","userId"],type:"object"}],description:"Token is the new token that will be returned by this endpoint."}},required:["token"],type:"object"}}}},400:{description:"Invalid JSON",content:{"application/json":{schema:{properties:{error:{type:"string"}},type:"object"}}}},404:{description:"User Not Found",content:{"application/json":{schema:{properties:{error:{type:"string"}},type:"object"}}}},500:{description:"Internal Server Error",content:{"application/json":{schema:{properties:{error:{type:"string"}},type:"object"}}}}}})]})}function f(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(x,{...e})}):x(e)}}}]);