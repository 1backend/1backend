"use strict";(self.webpackChunksingulatron_api_docs=self.webpackChunksingulatron_api_docs||[]).push([[2637],{25284:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>b,contentTitle:()=>f,default:()=>y,frontMatter:()=>k,metadata:()=>i,toc:()=>R});const i=JSON.parse('{"id":"1backend-api/refresh-token","title":"Refresh Token","description":"Refreshes an existing token, including inactive ones.","source":"@site/docs/1backend-api/refresh-token.api.mdx","sourceDirName":"1backend-api","slug":"/1backend-api/refresh-token","permalink":"/docs/1backend-api/refresh-token","draft":false,"unlisted":false,"editUrl":null,"tags":[],"version":"current","frontMatter":{"id":"refresh-token","title":"Refresh Token","description":"Refreshes an existing token, including inactive ones.","sidebar_label":"Refresh Token","hide_title":true,"hide_table_of_contents":true,"api":"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","sidebar_class_name":"post api-method","info_path":"docs/1backend-api/1-backend","custom_edit_url":null},"sidebar":"openApiSidebar","previous":{"title":"Get Public Key","permalink":"/docs/1backend-api/get-public-key"},"next":{"title":"Register","permalink":"/docs/1backend-api/register"}}');var s=t(74848),r=t(28453),o=t(53746),a=t.n(o),d=t(56518),c=t.n(d),l=t(99972),p=t.n(l),u=t(25342),h=t.n(u),g=(t(44215),t(82223),t(24861));const k={id:"refresh-token",title:"Refresh Token",description:"Refreshes an existing token, including inactive ones.",sidebar_label:"Refresh Token",hide_title:!0,hide_table_of_contents:!0,api:"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",sidebar_class_name:"post api-method",info_path:"docs/1backend-api/1-backend",custom_edit_url:null},f=void 0,b={},R=[];function m(e){const n={p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.default,{as:"h1",className:"openapi__heading",children:"Refresh Token"}),"\n",(0,s.jsx)(a(),{method:"post",path:"/user-svc/refresh-token",context:"endpoint"}),"\n",(0,s.jsx)(n.p,{children:"Refreshes an existing token, including inactive ones.\nThe old token becomes inactive (if not already inactive), and a new, active token is issued.\nThis allows continued verification of user roles without requiring a new login.\nInactive tokens are refreshable unless explicitly revoked (no mechanism for this yet).\nLeaked tokens should be handled separately, via a revocation flag or deletion."}),"\n",(0,s.jsx)(c(),{parameters:void 0}),"\n",(0,s.jsx)(p(),{title:"Body",body:void 0}),"\n",(0,s.jsx)(h(),{id:void 0,label:void 0,responses:{200:{description:"Refresh Token successful",content:{"application/json":{schema:{properties:{token:{properties:{active:{description:"Active tokens contain the most up-to-date information.\nWhen a user's role changes\u2014due to role assignment, organization\ncreation/assignment, etc.\u2014all existing tokens are marked inactive.\nActive tokens are reused during login, while inactive tokens\nthat have been recently refreshed (being used still) are kept for further refreshing\n(unless `OB_TOKEN_AUTO_REFRESH_OFF` is set to true, old tokens can be refreshed indefinitely.)\n\nActive tokens contain the most up-to-date information.\nWhen a user's role changes\u2014due to role assignment, organization\ncreation/assignment, etc.\u2014all existing tokens are marked inactive.\nActive tokens are reused during login, while inactive tokens\nthat have been recently refreshed (see `lastRefreshedAt` field) and are still in use are retained for further refreshing.\n(Unless `OB_TOKEN_AUTO_REFRESH_OFF` is set to true, in which case old tokens can be refreshed indefinitely.)",type:"boolean"},app:{example:"unnamed,omitempty",type:"string"},createdAt:{type:"string"},deletedAt:{type:"string"},device:{description:"The device the token is associated with.\nThis in combination with LastRefreshedAt can be used to\ndetermine if the token is still in use, and lets us prune unused tokens.",type:"string"},expiresAt:{type:"string"},id:{type:"string"},lastRefreshedAt:{description:"The last time the token was refreshed.\nThis is used to determine if the token is still in use.",type:"string"},token:{description:'Token is a signed JWT used to authenticate the user without querying the User Svc.\nYou can verify it using the public key at `/user-svc/public-key`.\n\nThe token is just a JSON object with fields like:\n- "oui": the user ID (e.g., "usr_dC4K75Cbp6")\n- "olu": the user slug (e.g., "test-user-slug-0")\n- "oro": a list of roles, such as:\n  - "user-svc:user"\n  - "user-svc:org:{org_dC4K7NNDCG}:user"',type:"string"},updatedAt:{type:"string"},userId:{type:"string"}},required:["createdAt","device","expiresAt","id","token","updatedAt","userId"],type:"object"}},required:["token"],type:"object"}}}},401:{description:"Unauthorized",content:{"application/json":{schema:{properties:{error:{type:"string"}},type:"object"}}}},500:{description:"Internal Server Error",content:{"application/json":{schema:{properties:{error:{type:"string"}},type:"object"}}}}}})]})}function y(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(m,{...e})}):m(e)}}}]);