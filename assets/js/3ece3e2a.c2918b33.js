"use strict";(self.webpackChunksingulatron_api_docs=self.webpackChunksingulatron_api_docs||[]).push([[3780],{94366:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"built-in-services/proxy-svc","title":"Proxy Svc","description":"The Proxy Service in 1Backend handles various forms of proxying:","source":"@site/docs/built-in-services/proxy-svc.md","sourceDirName":"built-in-services","slug":"/built-in-services/proxy-svc","permalink":"/docs/built-in-services/proxy-svc","draft":false,"unlisted":false,"editUrl":"https://github.com/1backend/1backend/tree/main/docs-source/docs/built-in-services/proxy-svc.md","tags":[{"inline":true,"label":"proxy-svc","permalink":"/docs/tags/proxy-svc"},{"inline":true,"label":"routing","permalink":"/docs/tags/routing"},{"inline":true,"label":"reverse proxy","permalink":"/docs/tags/reverse-proxy"},{"inline":true,"label":"edge proxy","permalink":"/docs/tags/edge-proxy"},{"inline":true,"label":"certifications","permalink":"/docs/tags/certifications"},{"inline":true,"label":"certs","permalink":"/docs/tags/certs"},{"inline":true,"label":"https","permalink":"/docs/tags/https"},{"inline":true,"label":"tls","permalink":"/docs/tags/tls"},{"inline":true,"label":"multitenant","permalink":"/docs/tags/multitenant"}],"version":"current","sidebarPosition":15,"frontMatter":{"sidebar_position":15,"tags":["proxy-svc","routing","reverse proxy","edge proxy","certifications","certs","https","tls","multitenant"]},"sidebar":"tutorialSidebar","previous":{"title":"User Svc","permalink":"/docs/built-in-services/user-svc"},"next":{"title":"Secret Svc","permalink":"/docs/built-in-services/secret-svc"}}');var i=r(74848),t=r(28453);const o={sidebar_position:15,tags:["proxy-svc","routing","reverse proxy","edge proxy","certifications","certs","https","tls","multitenant"]},c="Proxy Svc",l={},a=[{value:"Service proxying",id:"service-proxying",level:2},{value:"Edge proxying",id:"edge-proxying",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"proxy-svc",children:"Proxy Svc"})}),"\n",(0,i.jsx)(n.p,{children:"The Proxy Service in 1Backend handles various forms of proxying:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Service proxying"}),": Proxies requests to custom services registered in the registry."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Edge proxying"}),": When ",(0,i.jsx)(n.code,{children:"OB_EDGE_PROXY"})," is set to true and the appropriate Routes are configured, the proxy service can handle HTTPS requests and perform TLS termination."]}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["This page provides a high-level overview of ",(0,i.jsx)(n.code,{children:"Proxy Svc"}),". For detailed information, refer to the ",(0,i.jsx)(n.a,{href:"/docs/1backend-api/list-routes",children:"Proxy Svc API documentation"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"service-proxying",children:"Service proxying"}),"\n",(0,i.jsx)(n.p,{children:"When you send a request to 1Backend, for example:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"curl 127.0.0.1:11337/user-svc/login ...\n"})}),"\n",(0,i.jsx)(n.p,{children:"One of two things will happen:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"If the request matches a built-in service, it is routed there."}),"\n",(0,i.jsxs)(n.li,{children:["Otherwise, the ",(0,i.jsx)(n.a,{href:"/docs/built-in-services/registry-svc",children:"registry"})," is consulted. If a custom service exists with a slug matching the first path segment (e.g., user-svc), the request is routed to it."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'Client Request: curl 127.0.0.1:11337/user-svc/login\n                        |\n                        v\n      +-----------------------------------------+\n      |  Is "user-svc" a built-in service?      |\n      +-----------------------------------------+\n                 |                      |\n                Yes                    No\n                 |                      |\n                 v                      v\n     +----------------------+   +-----------------------+\n     | Route directly to    |   |      Proxy Svc        |\n     | built-in service     |   +-----------------------+\n     +----------------------+              |\n                                           v\n                          +-------------------------------+\n                          | Look up "user-svc" in registry|\n                          +-------------------------------+\n                                           |\n                                           v\n                            +--------------------------+\n                            | Proxy to target service  |\n                            +--------------------------+\n'})}),"\n",(0,i.jsx)(n.h2,{id:"edge-proxying",children:"Edge proxying"}),"\n",(0,i.jsx)(n.p,{children:"When edge proxying is enabled, 1Backend also listens on ports 80 (HTTP) and 443 (HTTPS). It can automatically manage HTTPS certificates (requesting and renewing them as needed) for your configured domains."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"$ oo routes list\nROUTE ID                    TARGET\napi.singulatron.com         http://1backend:11337\nsingulatron.com             http://frontend:8080\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"        +----------------------+\n        |  Browser / Client    |\n        |  (requests HTTPS)    |\n        +----------+-----------+\n                   |\n           Request to domain\n       (e.g. https://singulatron.com)\n                   |\n                   v\n          +------------------------+\n          |     Port 443 (TLS)     |\n          |   TLS termination by   |\n          |     Proxy Svc (edge)   |\n          +------------------------+\n                   |\n           Match domain in Routes\n                   |\n                   v\n     +------------------------------+\n     | Route found:                |\n     |   singulatron.com           |\n     |   \u2192 http://frontend:8080    |\n     +------------------------------+\n                   |\n                   v\n         +---------------------+\n         |   Target container  |\n         |   (e.g. frontend)   |\n         +---------------------+\n"})})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>c});var s=r(96540);const i={},t=s.createContext(i);function o(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);