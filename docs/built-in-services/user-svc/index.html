<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-built-in-services/user-svc" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">User Svc | 1Backend</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:url" content="https://1backend.com/docs/built-in-services/user-svc"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="ai, llm, free gpt, gpt, open-source, open source, ai framework, ai server"><meta data-rh="true" name="title" content="1Backend Documentation"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="User Svc | 1Backend"><meta data-rh="true" name="description" content="The user service is at the heart of 1Backend, managing users, tokens, organizations, permissions and more. Each service and human on an 1Backend network has an account in the User Svc."><meta data-rh="true" property="og:description" content="The user service is at the heart of 1Backend, managing users, tokens, organizations, permissions and more. Each service and human on an 1Backend network has an account in the User Svc."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://1backend.com/docs/built-in-services/user-svc"><link data-rh="true" rel="alternate" href="https://1backend.com/docs/built-in-services/user-svc" hreflang="en"><link data-rh="true" rel="alternate" href="https://1backend.com/docs/built-in-services/user-svc" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="1Backend RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="1Backend Atom Feed"><link rel="stylesheet" href="/assets/css/styles.11f98eeb.css">
<script src="/assets/js/runtime~main.db849537.js" defer="defer"></script>
<script src="/assets/js/main.e33efa5f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo_circled_grey.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo_circled_grey.svg" alt="1Backend Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo_circled_grey.svg" alt="1Backend Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">1Backend</b></a><a class="navbar__item navbar__link" href="/docs/intro">Documentation</a><a class="navbar__item navbar__link" href="/docs/category/1backend-api">API</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/1backend/1backend" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Welcome to 1Backend</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/running-the-server">Running the server</a><button aria-label="Expand sidebar category &#x27;Running the server&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/built-in-services">Built-in services</a><button aria-label="Collapse sidebar category &#x27;Built-in services&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/built-in-services/user-svc">User Svc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/built-in-services/secret-svc">Secret Svc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/built-in-services/prompt-svc">Prompt Svc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/built-in-services/registry-svc">Registry Svc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/built-in-services/deploy-svc">Deploy Svc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/built-in-services/file-svc">File Svc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/built-in-services/policy-svc">Policy Svc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/built-in-services/config-svc">Config Svc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/built-in-services/model-svc">Model Svc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/built-in-services/data-svc">Data Svc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/built-in-services/container-svc">Container Svc</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/built-in-services/chat-svc">Chat Svc</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/writing-custom-services">Writing custom services</a><button aria-label="Expand sidebar category &#x27;Writing custom services&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/command-line">Command line</a><button aria-label="Expand sidebar category &#x27;Command line&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/contributing">Contributing</a><button aria-label="Expand sidebar category &#x27;Contributing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/platform-capabilities">Platform capabilities</a><button aria-label="Expand sidebar category &#x27;Platform capabilities&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/privacy-notice">Privacy Notice</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/1backend/1-backend">1backend</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_xLCN"><div class="docItemContainer_jfFK"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/built-in-services"><span itemprop="name">Built-in services</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">User Svc</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><div class="row"><div class="col col--12 markdown"><header><h1>User Svc</h1></header>
<p>The user service is at the heart of 1Backend, managing users, tokens, organizations, permissions and more. Each service and human on an 1Backend network has an account in the <code>User Svc</code>.</p>
<blockquote>
<p>This page provides a high-level overview of <code>User Svc</code>. For detailed information, refer to the <a href="/docs/1backend/login">User Svc API documentation</a>.</p>
</blockquote>
<p>User Svc supports multitenancy: while users are shared globally, tokens, organizations, permits, enrollments, and memberships are isolated by an &quot;app&quot; field. This approach allows a single 1Backend instance to securely support multiple web applications.</p>
<blockquote>
<p>Note: Not all services included with 1Backend may support multitenancy. Please refer to the documentation for details and look for the tag <code>multitenant</code>.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="glossary">Glossary<a href="#glossary" class="hash-link" aria-label="Direct link to Glossary" title="Direct link to Glossary">​</a></h2>
<p><strong>Token</strong>: A JWT (JSON Web Token) issued and signed by the User Svc, used to authenticate both human and service accounts.</p>
<p><strong>Role</strong>: A simple string identifier like <code>user-svc:user</code> or <code>user-svc:org:{orgId}:admin</code> that represents a specific capability or access level. Roles are embedded in tokens.</p>
<p><strong>Enroll</strong>: (Enrollment) A mechanism to assign roles to users—both current and future. Enrolls allow roles to be claimed later, once the user joins or logs in.</p>
<p><strong>Permission</strong>: A string such as <code>petstore-svc:read</code>, typically mapping to an API action or endpoint. Roles can bundle multiple permissions.</p>
<p><strong>Permit</strong>: A mechanism for assigning permissions to users or roles. Permits define who can access what by connecting users or roles with specific permissions.</p>
<p><strong>Organization</strong>: A way for users to freely associate with each other. Anyone can create organizations and grant membership to others to their organization.</p>
<p><strong>Membership</strong>: A formal record that links a user to an organization. Memberships determine which organizations a user belongs to and enable organization-scoped roles to take effect.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>The most important thing about the User Svc is that service (machine) and user (human) accounts look and function the same.</p>
<p>Every service you write needs to <a href="/docs/1backend/register">register</a> at startup, or <a href="/docs/1backend/login">log in</a> with the credentials it saves and manages if it&#x27;s already registered. Just like a human.</p>
<p>A service account is not an admin account, it&#x27;s a simple user level account. You might wonder how service-to-service calls work then.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="service-to-service-calls">Service to service calls<a href="#service-to-service-calls" class="hash-link" aria-label="Direct link to Service to service calls" title="Direct link to Service to service calls">​</a></h2>
<p>Most endpoints on 1Backend can only be called by administrators by default.</p>
<p>Let&#x27;s take prompting. If you want to let your users prompt AIs you might write a wrapper service called <code>User Prompter Svc</code> with the slug <code>user-prompter-svc</code>.</p>
<p>If we look at the <a href="/docs/1backend/prompt">Add Prompt endpoint API docs</a>, we can see that it mentions</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Requires the `prompt-svc:prompt:create` permission.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To enable your service to call the Add Prompt endpoint, we need to create a permit with your service slug and the permission mentioned above:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;user-prompter-permit&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">permissionId</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;prompt-svc:prompt:create&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">slugs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;user-prompter-svc&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can apply these permits with an administrator account in your CI workflow with the <code>oo</code> CLI:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">oo permit save user-prompter-permit.yaml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="auth-patterns">Auth patterns<a href="#auth-patterns" class="hash-link" aria-label="Direct link to Auth patterns" title="Direct link to Auth patterns">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="role-based-access">Role-based access<a href="#role-based-access" class="hash-link" aria-label="Direct link to Role-based access" title="Direct link to Role-based access">​</a></h3>
<ul>
<li><strong>Role-Only Checks</strong>: Authorize users based solely on their assigned roles. This is the simplest method—no need to check individual permissions.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="permission-based-access">Permission-based access<a href="#permission-based-access" class="hash-link" aria-label="Direct link to Permission-based access" title="Direct link to Permission-based access">​</a></h3>
<ul>
<li><strong>API Permission Check</strong>: Use the <code>Has Permission</code> endpoint with the user&#x27;s authentication headers and a permission ID to verify access dynamically. This endpoint is designed to be easy to cache (it has no other params apart from the caller header and a permission).</li>
</ul>
<p>Permission-based checks offer more nuanced control than simple role-only checks—permits can grant specific permissions to slugs, roles and more.</p>
<blockquote>
<p>If you are looking at restricting access to endpoints in other ways, you might be interested in: <a href="/docs/built-in-services/policy-svc">Policy Svc</a>.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="tokens">Tokens<a href="#tokens" class="hash-link" aria-label="Direct link to Tokens" title="Direct link to Tokens">​</a></h2>
<p>The User Svc produces a JWT (<a href="https://en.wikipedia.org/wiki/JSON_Web_Token" target="_blank" rel="noopener noreferrer">JSON Web Token</a>) upon <a href="/docs/1backend/login">/user-svc/login</a> in the <code>token.token</code> field (see the response documentation).</p>
<p>You can either use this token as a proper JWT - parse it and inspect the contents, or you can just use the token to read the user account that belongs to the token with the <a href="/docs/1backend/read-self">/user-svc/self</a> endpoint.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="verifying-a-token">Verifying a token<a href="#verifying-a-token" class="hash-link" aria-label="Direct link to Verifying a token" title="Direct link to Verifying a token">​</a></h3>
<p>The <a href="/docs/1backend/get-public-key"><code>/user-svc/public-key</code></a> will return you the public key of the User Svc which then you can use that to verify the token.</p>
<p>Use the JWT libraries that are available in your programming language to do that, or use the Singularon <a href="https://github.com/1backend/1backend/tree/main/sdk" target="_blank" rel="noopener noreferrer">SDK</a> if your language is supported.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="automatic-token-refresh">Automatic token refresh<a href="#automatic-token-refresh" class="hash-link" aria-label="Direct link to Automatic token refresh" title="Direct link to Automatic token refresh">​</a></h3>
<p>1Backend tokens are valid for a limited time (see <code>OB_TOKEN_EXPIRATION</code>). Once a token expires, 1Backend can either automatically refresh it (this is the default behaviour) or reject it based on configuration (see <code>OB_TOKEN_AUTO_REFRESH_OFF</code>).</p>
<p>If automatic token refresh is disabled, clients are responsible for detecting expiration and refreshing the token themselves.</p>
<p>If automatic refresh is enabled, expired tokens can still be reused indefinitely. Behind the scenes, 1Backend maps old tokens to their most recent valid version.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-flow">Example flow<a href="#example-flow" class="hash-link" aria-label="Direct link to Example flow" title="Direct link to Example flow">​</a></h4>
<p>To understand how automatic token refresh works in practice, consider the following scenario:</p>
<ul>
<li>A user acquires a token.</li>
<li>The token is valid for X minutes.</li>
<li>After expiration, Service A receives a request with the old token.</li>
<li>Service A then has two options:<!-- -->
<ol>
<li>Call the User Svc RefreshToken endpoint on every request to get a new token — which undermines the stateless nature of JWTs.</li>
<li>Cache the refreshed token and continue accepting the expired one, internally mapping it to the latest valid token without calling 1Backend. When the refreshed token expires, this process repeats.</li>
</ol>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="token-pruning">Token Pruning<a href="#token-pruning" class="hash-link" aria-label="Direct link to Token Pruning" title="Direct link to Token Pruning">​</a></h4>
<p>You might wonder: if an old token keeps getting refreshed indefinitely, does that mean a new token is minted every <code>OB_TOKEN_EXPIRATION</code> interval — and do they pile up forever?</p>
<p>While a new token is issued on each refresh, the system keeps track of which tokens are actively being refreshed and discards the rest. At any given time, a maximum of <strong>three tokens per device</strong> (see the <code>device</code> field in the token) are retained:</p>
<ul>
<li>The currently active token</li>
<li>The two most recently refreshed tokens (kept as a buffer to handle clock drift or retries)</li>
</ul>
<p>All other older tokens are pruned to avoid unbounded growth.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="token-structure">Token structure<a href="#token-structure" class="hash-link" aria-label="Direct link to Token structure" title="Direct link to Token structure">​</a></h3>
<p>The structure of the JWT is the following:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># User Id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">oui</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> usr_dC4K75Cbp6</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Slug</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">osl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> test</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">slug</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Roles</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">oro</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">svc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">user</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">svc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">org</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">org_dC4K7NNDCG</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">user</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The field names are kept short to save space, so perhaps the Go definition is also educational:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">type</span><span class="token plain"> Claims </span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	UserId  </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain">   </span><span class="token string" style="color:rgb(195, 232, 141)">`json:&quot;oui&quot;`</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// `oui`: 1backend user ids</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	Slug    </span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain">   </span><span class="token string" style="color:rgb(195, 232, 141)">`json:&quot;osl&quot;`</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// `osl`: 1backend slug</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	Roles </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token builtin" style="color:rgb(130, 170, 255)">string</span><span class="token plain">   </span><span class="token string" style="color:rgb(195, 232, 141)">`json:&quot;oro&quot;`</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// `oro`: 1backend roles</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	jwt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">RegisteredClaims</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="roles">Roles<a href="#roles" class="hash-link" aria-label="Direct link to Roles" title="Direct link to Roles">​</a></h2>
<p>Roles are simply strings. They are not a database record, they don&#x27;t have an ID, name etc. They are simple strings, such as <code>user-svc:admin</code>.</p>
<p>A user token produced upon login contains all the roles a user has.</p>
<blockquote>
<p>Efficiency Tip: JWT tokens are sent with every request. Keeping the number of roles minimal improves performance.</p>
</blockquote>
<p>When checking if a user is authorized, there are a few common patterns to choose from:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="roles-without-permissions">Roles without permissions<a href="#roles-without-permissions" class="hash-link" aria-label="Direct link to Roles without permissions" title="Direct link to Roles without permissions">​</a></h3>
<p>Roles are powerful, even without specific permissions attached. One common use case is managing product subscriptions.</p>
<p>Suppose you launch a new product called Funny Cats Newsletter with two subscription tiers: Pro and Ultra. You could create a service with the slug funny-cats-newsletter-svc and define custom static roles for each tier:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">funny</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">cats</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">newsletter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">svc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">pro</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">funny</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">cats</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">newsletter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">svc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">ultra</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>By checking if these roles exist in a user&#x27;s token, you can authorize access to product-specific features. These roles can be created dynamically by calling the Create Role endpoint.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="roles-containing-dynamic-data">Roles containing dynamic data<a href="#roles-containing-dynamic-data" class="hash-link" aria-label="Direct link to Roles containing dynamic data" title="Direct link to Roles containing dynamic data">​</a></h3>
<p>You are free to make up your own roles which might even have dynamic data, just like the User Svc did with the organization ids.</p>
<p>Example:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">user-svc:org:{org_dBZRCej3fo}:admin</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">user-svc:org:{org_dBZRCej3fo}:user</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>By convention these dynamic values are enclosed in <!-- -->. In this example, roles are assigned per organization. For more details, see the Organizations section.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="owning-roles-vs-having-roles">Owning roles vs. having roles<a href="#owning-roles-vs-having-roles" class="hash-link" aria-label="Direct link to Owning roles vs. having roles" title="Direct link to Owning roles vs. having roles">​</a></h3>
<p>In many endpoints such <code>SaveEnrolls</code>, the topic of &quot;role ownership&quot; comes up. The basic problem is simple: just because someone has a role, it doesn&#x27;t mean they can also bestow that role upon other users. In simple terms, if an admin makes someone a user, that user should not be able to make others users, as that is the privilege of the admins.</p>
<p>A user &quot;owns&quot; a role in the following cases:</p>
<ul>
<li>The role is prefixed with the caller&#x27;s slug. For example, a user with the slug <code>joe-doe</code> owns roles like <code>joe-doe:any-custom-role</code>.</li>
<li>User &quot;owns&quot; all roles that share a prefix if they hold the corresponding <code>:admin</code> role. For example, having <code>user-svc:org:{org_id}:admin</code> means the user owns roles like <code>user-svc:org:{org_id}:user</code> and <code>user-svc:org:{org_id}:viewer</code>.</li>
</ul>
<p>By enforcing role ownership rules, the system ensures that roles are only assigned by authorized users, preventing privilege escalation and maintaining security within the organization.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="conventions">Conventions<a href="#conventions" class="hash-link" aria-label="Direct link to Conventions" title="Direct link to Conventions">​</a></h3>
<p>Each role created must by prefixed by the slug of the account that created it. Said account becomes the owner of the role and only that account can edit the role.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="organizations">Organizations<a href="#organizations" class="hash-link" aria-label="Direct link to Organizations" title="Direct link to Organizations">​</a></h2>
<p>In the dynamic roles section we already talked about organizations, lets elaborate on them here a bit.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;org_eZqC0BbdG2&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Acme Corporation&quot;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Full name of the organization</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">slug</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;acme-corporation&quot;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># URL-friendly unique identifier for the organization</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">createdAt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2025-01-15T12:00:00Z&quot;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Example ISO 8601 timestamp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="access-rules">Access rules<a href="#access-rules" class="hash-link" aria-label="Direct link to Access rules" title="Direct link to Access rules">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="create">Create<a href="#create" class="hash-link" aria-label="Direct link to Create" title="Direct link to Create">​</a></h4>
<p>Any logged in user can create an organization, provided the <code>Organization</code> slug is not taken yet. The creator becomes the first admin of the organization, acquiring the role of <code>user-svc:org:{orgId}:admin</code> role.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="membership">Membership<a href="#membership" class="hash-link" aria-label="Direct link to Membership" title="Direct link to Membership">​</a></h4>
<p>Admins can assign other users member (<code>user-svc:org:{orgId}:user</code>) or admin roles (<code>user-svc:org:{orgId}:admin</code>) for the organizations they administer.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-cases">Use cases<a href="#use-cases" class="hash-link" aria-label="Direct link to Use cases" title="Direct link to Use cases">​</a></h3>
<p>Organizations let users to freely associate with each other and create groups. Think about Discord servers, Slack workspaces, Github organizations etc.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="permissions">Permissions<a href="#permissions" class="hash-link" aria-label="Direct link to Permissions" title="Direct link to Permissions">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="conventions-1">Conventions<a href="#conventions-1" class="hash-link" aria-label="Direct link to Conventions" title="Direct link to Conventions">​</a></h3>
<p>Each permission created must by prefixed by the slug of the account that created it. Said account becomes the owner of the permission and only that account can add the permission to a role.</p>
<blockquote>
<p>Once you (your service) own a permission (by creating it, and it being prefixed by your account slug), you can add it to any role, not just roles owned by you.</p>
</blockquote>
<p>Example; let&#x27;s say your service is <code>petstore-svc</code>. 1Backend prefers fine-grained access control, so you are free to define your own permissions, such as <code>petstore-svc:read</code> or <code>petstore-svc:pet:read</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="services-with-multiple-nodes">Services with multiple nodes<a href="#services-with-multiple-nodes" class="hash-link" aria-label="Direct link to Services with multiple nodes" title="Direct link to Services with multiple nodes">​</a></h2>
<p>You might now wonder what happens when a service has multiple instances/nodes. Won&#x27;t their user accounts &quot;clash&quot; in the <code>User Svc</code>? The answer to this is that from the <code>User Svc</code> point of view, each node/instance of a service is the same account.</p>
<p>This is possible because the platform is designed with services having a &quot;Shared Database Access&quot;.</p>
<p>Let&#x27;s say you have a Cassandra network that spans multiple Availability Zones/Regions. Your nodes will also span multiple AZs/Regions and each instance of them will log in as <code>X Svc</code>.</p></div></div></div><div class="row"><div class="col col--12"><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/user-svc">user-svc</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/permissions">permissions</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/roles">roles</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/authentication">authentication</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/authorization">authorization</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/service">service</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/service-to-service-calls">service to service calls</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/s-2-s-calls">s2s calls</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/multitenant">multitenant</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/1backend/1backend/tree/main/docs-source/docs/built-in-services/user-svc.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></div></div></article><div class="row"><div class="col col--12"><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/category/built-in-services"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Built-in services</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/built-in-services/secret-svc"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Secret Svc</div></a></nav></div></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#glossary" class="table-of-contents__link toc-highlight">Glossary</a></li><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#service-to-service-calls" class="table-of-contents__link toc-highlight">Service to service calls</a></li><li><a href="#auth-patterns" class="table-of-contents__link toc-highlight">Auth patterns</a><ul><li><a href="#role-based-access" class="table-of-contents__link toc-highlight">Role-based access</a></li><li><a href="#permission-based-access" class="table-of-contents__link toc-highlight">Permission-based access</a></li></ul></li><li><a href="#tokens" class="table-of-contents__link toc-highlight">Tokens</a><ul><li><a href="#verifying-a-token" class="table-of-contents__link toc-highlight">Verifying a token</a></li><li><a href="#automatic-token-refresh" class="table-of-contents__link toc-highlight">Automatic token refresh</a></li><li><a href="#token-structure" class="table-of-contents__link toc-highlight">Token structure</a></li></ul></li><li><a href="#roles" class="table-of-contents__link toc-highlight">Roles</a><ul><li><a href="#roles-without-permissions" class="table-of-contents__link toc-highlight">Roles without permissions</a></li><li><a href="#roles-containing-dynamic-data" class="table-of-contents__link toc-highlight">Roles containing dynamic data</a></li><li><a href="#owning-roles-vs-having-roles" class="table-of-contents__link toc-highlight">Owning roles vs. having roles</a></li><li><a href="#conventions" class="table-of-contents__link toc-highlight">Conventions</a></li></ul></li><li><a href="#organizations" class="table-of-contents__link toc-highlight">Organizations</a><ul><li><a href="#access-rules" class="table-of-contents__link toc-highlight">Access rules</a></li><li><a href="#use-cases" class="table-of-contents__link toc-highlight">Use cases</a></li></ul></li><li><a href="#permissions" class="table-of-contents__link toc-highlight">Permissions</a><ul><li><a href="#conventions-1" class="table-of-contents__link toc-highlight">Conventions</a></li></ul></li><li><a href="#services-with-multiple-nodes" class="table-of-contents__link toc-highlight">Services with multiple nodes</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://1backend.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">1backend.com<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://singulatron.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">singulatron.com<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discordapp.com/enroll/eRXyzeXEvM" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/singulatron" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/1backend/1backend" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 1Backend, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>