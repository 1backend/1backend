---
id: upsert-instance
title: "Upsert an Instance"
description: "Allows user to upsert a new policy instance based on a template."
sidebar_label: "Upsert an Instance"
hide_title: true
hide_table_of_contents: true
api: eJy9Vt1u2zYUfhWCVxsgW06zApuulmxB4a1Yg7jBLlxf0NSxzIYiWZKy4xoC9hB7wj3JcEjJkmy1yIChN4klHZ7znR9+3znSHBy3wnihFc3ojZR670jlwBKvSWUcWE8YUbAnRkvBD0Qo55niQNbMQU60Iox4KI1kHqY0odqAZehuntOMRg/z5gxNqGGWleDBOpotj2fhWzsy/5UmVOArw/yWJlSxEmhG2+DznCbUwqdKWMhp5m0FCXV8CyWj2ZH6g0Fr561QBa3rVTQG5291fkALrpUH5fEnM0YKHiCnHx3iOPZcGYsJeQEOn9r4l19A5UaL6BGeWWkkIkixkhO346mFQjgPlibn6BIq8hHQw1Kdh1tLzZ+kcP4LnyCf30fEHko36r55waxlB1p3L/T6I3CPFpZ5eCtKMRIElBc+VJJJ+W4TegmqKmm2pJhzaJAwdHWebkKfJ2g42TGLTcUxoHfB2yOew8bHx/k9XWHnumo2juuEluz5ITbUDQp+NTvFE8pDARatHdcGxrGe2pbQQuo1ky9EvECXd93h8Pym8TBEfQqBJRYl/ClUrvfDObkqL+fisiNjPWqv3jwfTxB7OJGhiUlval6W5fuT84fTKCS9t7edv2HOvaiIurupy/5UD9CvXpAuvhoyxmNkqBNxNFNxwQ4BhDNauTi/r2Yz/PcF+omsBTlxFefg3KaS8kCTl7PGBe46oT+Mh9wxKXLy2+LdH/8lwNlttFbbMeIbqWBAcnWJ5FGxym+1FZ8h/2ZIXo/XxINVTJIF2B1Ychd8fhtIyBbAKxvIbXmkt8As2JvKb2m2DEPuWRHuxn2Uw8WO4+iW4LcaBc9UPqgcHqBp1MwgAK10pMdOxGqK4TDJqIaVlXgqlZozudXOZ69/fHV9RTFuC2uBacbM+uDOi/j+YIB8aEw+ULLRKO2Qk/WBMOIM40CYyonXT6AI4/GykI3VJfFbIEjGmBx5qwuhSEti01aXt8DyoGaNMt80wxN60pEZM+J3iPKCfXroVPiuJYuhqnY6Oi6eqJUdZw0lciCKfRlctidW56rW6lgnWgNpQT1p1KMvFX0aR+6uz4j4nP+E2uh262A8Bi6ZwGY7JsH97IQqKsm81WrKddkr6/2cLCpjtMW4cT623pssTa/WjD+ByvFASi+Y8YZUSmwEdjzakY225KArS27mpHeB3D9//V0KbjVOouDgJnGzw+lYV0J63AQdZzKsd1JwUC60qoX45v4t2V1PZwOALkvT/X4/LVQ11bZIm3MuZYWRk+vpbLr1pYwKZkv3brOI0bv83J4VBdip0GkwSUPhfdTL25gTTShenpjxbHo9nU0sn776KaxP2vmSqR7SRiyYIr2FdFC13mL4f+zCzSXw8OxTI5lQiCvU6NhQxJJ2FBGu1glX1tt1VwlFNkDz4xFjPVpZ1/j6UwUWmWqV0B2zgq2xPLhXC4e/c5ptmHTwlTS/e2iE8nsyXL9HwbfXWqEc7pis8Ikm9AkOw/W8xqvWkAQCiga/xLATZKeegws6r5P2xA3nYPxXbfv0e//4HvecZssvdR63kT0uBGwfsepQhcAY4d2RSqaKihVoG13ipWUNr3ZMhoiS9gcmNVqNcyaMeeBfzGr0yPEYebKuT/bx0xdPnOi3LTwWvK7/BRzixac=
sidebar_class_name: "put api-method"
info_path: docs/1backend/1-backend
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Upsert an Instance"}
>
</Heading>

<MethodEndpoint
  method={"put"}
  path={"/policy-svc/instance/{instanceId}"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Allows user to upsert a new policy instance based on a template.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={[{"description":"Instance ID","in":"path","name":"instanceId","required":true,"schema":{"type":"string"}}]}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"properties":{"instance":{"properties":{"endpoint":{"example":"/user-svc/register","type":"string"},"id":{"type":"string"},"parameters":{"properties":{"blocklist":{"properties":{"blockedIPs":{"items":{"type":"string"},"type":"array"}},"type":"object"},"rateLimit":{"properties":{"entity":{"allOf":[{"enum":["userId","ip"],"type":"string","x-enum-varnames":["EntityUserID","EntityIP"]}],"example":"userId"},"maxRequests":{"example":10,"type":"integer"},"scope":{"allOf":[{"enum":["endpoint","global"],"type":"string","x-enum-varnames":["ScopeEndpoint","ScopeGlobal"]}],"example":"endpoint"},"timeWindow":{"example":"1m","type":"string"}},"type":"object"}},"type":"object"},"templateId":{"allOf":[{"enum":["rate-limit","blocklist"],"type":"string","x-enum-varnames":["TemplateIdRateLimit","TemplateIdBlocklist"]}],"example":"rate-limit"}},"required":["parameters","templateId"],"type":"object"}},"type":"object"}}},"description":"Upsert Instance Request","required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Instance upserted successfully","content":{"application/json":{"schema":{"type":"object"}}}},"400":{"description":"Invalid JSON","content":{"application/json":{"schema":{"properties":{"error":{"type":"string"}},"type":"object"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"properties":{"error":{"type":"string"}},"type":"object"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"properties":{"error":{"type":"string"}},"type":"object"}}}}}}
>
  
</StatusCodes>


      