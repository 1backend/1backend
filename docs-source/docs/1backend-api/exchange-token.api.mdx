---
id: exchange-token
title: "Exchange Token"
description: "Exchange an existing token for a new token scoped to a different app (namespace)."
sidebar_label: "Exchange Token"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "put api-method"
info_path: docs/1backend-api/1-backend
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Exchange Token"}
>
</Heading>

<MethodEndpoint
  method={"put"}
  path={"/user-svc/token/exchange"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Exchange an existing token for a new token scoped to a different app (namespace).
The new token represents the same user but contains roles specific to the target app.

The original token remains valid.
The minted token is not stored and cannot be refreshed (and will have the same expiration duration as normal tokens), unlike tokens acquired via login.

For now, token exchange is designed to be in situ — the User Svc must be contacted at exchange time.
This introduces a stateful dependency on the User Svc, but simplifies things until broader use cases emerge.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"properties":{"newApp":{"description":"NewApp is the app of the new token that will be returned by this endpoint.","type":"string"},"newDevice":{"description":"NewDevice. If not provided, the device of the original token will be used.","type":"string"}},"required":["newApp"],"type":"object","title":"user_svc.ExchangeTokenRequest"}}},"description":"ExchangeToken Request","required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"content":{"application/json":{"schema":{"properties":{"token":{"description":"Due to the nature of JWT tokens, the token must be refreshed after\ncreating an organization, as dynamic organization roles are embedded in it.","properties":{"active":{"description":"Active tokens contain the most up-to-date information.\nWhen a user's role changes—due to role assignment, organization\ncreation/assignment, etc.—all existing tokens are marked inactive.\nActive tokens are reused during login, while inactive tokens\nthat have been recently refreshed (being used still) are kept for further refreshing\n(unless `OB_TOKEN_AUTO_REFRESH_OFF` is set to true, old tokens can be refreshed indefinitely.)\n\nActive tokens contain the most up-to-date information.\nWhen a user's role changes—due to role assignment, organization\ncreation/assignment, etc.—all existing tokens are marked inactive.\nActive tokens are reused during login, while inactive tokens\nthat have been recently refreshed (see `lastRefreshedAt` field) and are still in use are retained for further refreshing.\n(Unless `OB_TOKEN_AUTO_REFRESH_OFF` is set to true, in which case old tokens can be refreshed indefinitely.)","type":"boolean"},"app":{"example":"unnamed,omitempty","type":"string"},"createdAt":{"type":"string"},"deletedAt":{"type":"string"},"device":{"description":"The device the token is associated with.\nThis in combination with LastRefreshedAt can be used to\ndetermine if the token is still in use, and lets us prune unused tokens.","type":"string"},"expiresAt":{"type":"string"},"id":{"type":"string"},"lastRefreshedAt":{"description":"The last time the token was refreshed.\nThis is used to determine if the token is still in use.","type":"string"},"token":{"description":"Token is a signed JWT used to authenticate the user without querying the User Svc.\nYou can verify it using the public key at `/user-svc/public-key`.\n\nThe token is just a JSON object with fields like:\n- \"oui\": the user ID (e.g., \"usr_dC4K75Cbp6\")\n- \"olu\": the user slug (e.g., \"test-user-slug-0\")\n- \"oro\": a list of roles, such as:\n  - \"user-svc:user\"\n  - \"user-svc:org:{org_dC4K7NNDCG}:user\"","type":"string"},"updatedAt":{"type":"string"},"userId":{"type":"string"}},"required":["createdAt","device","expiresAt","id","token","updatedAt","userId"],"type":"object","title":"user_svc.AuthToken"}},"required":["token"],"type":"object","title":"user_svc.ExchangeTokenResponse"}}},"description":"ExchangeToken successful"},"400":{"content":{"application/json":{"schema":{"properties":{"error":{"type":"string"}},"type":"object","title":"user_svc.ErrorResponse"}}},"description":"Invalid JSON"},"404":{"content":{"application/json":{"schema":{"properties":{"error":{"type":"string"}},"type":"object","title":"user_svc.ErrorResponse"}}},"description":"User Not Found"},"500":{"content":{"application/json":{"schema":{"properties":{"error":{"type":"string"}},"type":"object","title":"user_svc.ErrorResponse"}}},"description":"Internal Server Error"}}}
>
  
</StatusCodes>


      